{% extends 'base.html' %}
{% block home %}    
<div class="main-home">
    <div class="home-topic">
      <h3>Trending Topics</h3>
      {% for topic in topics %}
      <a href="{% url 'topic_questions' topic.id %}">{{ topic }}</a>
      {% endfor %}
    </div>

    <div class="home-questions">
      {% for question in questions %}
      <div class="single-home-question">
          <div class="question-creator-time">
        <div class="dp">{{question.user.username|slice:":1"|upper }}</div>
        <div class="question-creator">
          <span>{{ question.user.username }}</span>
          <span>{{ question.created_at }}</span>
        </div>
      </div>
        <span class="question-text">{{ question }}</span>
        <form class="answer-form" method="post">
          <div class="dp">{{question.user.username|slice:":1"|upper }}</div>
          {% csrf_token %} {{ form.question_id }} {{ form }}
          <input type="hidden" name="question_id" value="{{ question.id }}" />
          <button type="submit">Add Comment</button>
        </form>
        <div class="home-answers">
          {% for answer in question.answer_set.all|slice:":2" %}
          <div class="comment-box">
            <div class="dp">{{answer.user.username|slice:":1"|upper }}</div>
            <div class="answer-box">
              <div class="answer-user-time">
                <span>{{answer.user.username}}</span>
                <span>{{answer.created_at}}</span>
              </div>
              <div>{{ answer }}</div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
      {% endfor %}
    </div>
    
    <div class="pagination">
      {% if questions.has_previous %}
      <a href="?page=1">First</a>
      <a href="?page={{ questions.previous_page_number }}">Previous</a>
      {% endif %}

      <span class="current-page">{{ questions.number }}</span>

      {% if questions.has_next %}
      <a href="?page={{ questions.next_page_number }}">Next</a>
      <a href="?page={{ questions.paginator.num_pages }}">Last</a>
      {% endif %}
    </div>
    
  </div>
{% endblock home %}
